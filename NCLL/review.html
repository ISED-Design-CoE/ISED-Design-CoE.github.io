<!DOCTYPE html>
<!--[if lt IE 9]><html class="no-js lt-ie9" lang="en" dir="ltr"><![endif]-->
<!--[if gt IE 8]><!--><html class="no-js" lang="en" dir="ltr"><!--<![endif]-->
	<head>
<!-- Based on CDTS 4.1.0 (https://cenw-wscoe.github.io/sgdc-cdts/docs/index-en.html) with DECoE customizations added (look for "DECoE customization" in comments) -->
	 <meta charset="utf-8">

<!-- Start DECoE customization -->
		<title>
			Review - NCLL portal - Spectrum licensing services - Innovation, Science and Economic Development Canada
		</title>
<!-- End DECoE customization -->

		<meta content="width=device-width,initial-scale=1" name="viewport">
		<script src="https://www.canada.ca/etc/designs/canada/cdts/gcweb/v4_1_0/cdts/compiled/soyutils.js"></script>
		<script src="https://www.canada.ca/etc/designs/canada/cdts/gcweb/v4_1_0/cdts/compiled/wet-en.js"></script>
		<noscript>
			<!-- Write closure fall-back static file -->
			<!-- refTop.html -->
		</noscript>
		<!-- Write closure template -->
		<script>
			document.write(wet.builder.refTop({
				"cdnEnv": "esdcprod"
			}));
		</script>

<!-- Start DECoE customization -->
	<style>
		/* Styles for all mockups */
			.notesaboutmockup {
				color: #333;
				background: #FFD;
				padding: 0 1em;
				border-color: #FC6;
				border-width: 2px;
				border-style: solid;
				margin-top: 3em;
			}
			.notesaboutmockup h2 {
				font-size: inherit;
				margin-top: 1em;
			}
		/* Styles for this mockup */
			#superhead {
				font-size: 1.7em;
				font-weight: bold;
			}
			#status {
				border-left: 3px solid #999;
				padding-left: 2px;
				background-color: #EEE;
			}
			ul.nav-wizard li {
				font-size: inherit;
			}
			h2 {
				display: inline;
			}
			#map {
				border: 1px solid black;
				height: 60em;
				width: 60em;
			}
	</style>
	<link href="fix-wet-styles.css" rel="stylesheet" type="text/css">
	<link href="https://sms-sgs.ic.gc.ca/static/css/wizard.css" rel="stylesheet" type="text/css">
	<link href="ncll-portal.css" rel="stylesheet" type="text/css">

	<!-- Leaflet -->
	<link rel="stylesheet" href="https://unpkg.com/leaflet@1.9.4/dist/leaflet.css" integrity="sha256-p4NxAoJBhIIN+hmNHrzRCf9tD/miZyoHS5obTRR9BMY=" crossorigin="" />
	<script src="https://unpkg.com/leaflet@1.9.4/dist/leaflet.js" integrity="sha256-20nQCchB9co0qIjJZRGuk2/Z9VM+kNiyxNV1lvTlZBo=" crossorigin=""></script>

<!-- End DECoE customization -->

	</head>
	<body vocab="http://schema.org/" typeof="WebPage">
		<div id="def-top">
			<!-- Write closure fall-back static file -->
			<!-- transactTop-en.html -->
		</div>
		<!-- Write closure template -->
		<script>
			var defTop = document.getElementById("def-top");
			defTop.outerHTML = wet.builder.top({
				"cdnEnv": "esdcprod",
				"lngLinks": [{
					"lang": "fr",
					"href": "transactional-fr.shtml",
					"text": "Fran√ßais"
				}],
				"search": false,
				"siteMenu": false,
				"breadcrumbs": [{
					"title": "SMS",
					"href": "index.html"
				},
				{
					"title": "NCLL portal",
					"href": "dashboard.html"
				}],
				"showPreContent": false
			});
		</script>
		<main property="mainContentOfPage" typeof="WebPageElement" class="container">

<!-- Start page content -->

	<div id="superhead">
		<p>Non-competitive local licence application (<span class="app-number"></span>01000139-001</span>) <span class="pull-right" id="status">Draft</span></p>
	</div>
	<div class="form-group">
		<ul class="nav nav-wizard">
			<li><a class="navbar-item" href="contact.html">Contact information</a></li>
			<li><a class="navbar-item" href="general.html">General information</a></li>
			<li><a class="navbar-item" href="technical-details.html">Technical details</a></li>
			<li><a class="navbar-item" href="licence-area.html">Licence area</a></li>
			<li><a class="navbar-item" href="frequency.html">Frequency</a></li>
			<li class="active" aria-current="step">Review</li>
		</ul>
	</div>

	<div class="wb-frmvld">
		<form action="success.html" method="get">
			<div class="wb-frm">
				<div class="container">
					<h1 property="name" id="wb-cont">Review</h1>

					<div>
						<h2>Contact information</h2>
						<span class="pull-right"><button class="btn btn-secondary" type="button" onclick="window.location.href = 'contact.html'+ window.location.search">Edit</button></span>
					</div>
					<h3>Administrative contact</h3>
					<dl>
						<dt>Name</dt>
						<dd><span class="admin-contact-name">John Dutton</span></dd>
						<dt>Address</dt>
						<dd><span class="admin-contact-address">999 Main St., Calgary AB</span></dd>
						<dt>Email</dt>
						<dd><span class="admin-contact-email">john.dutton@yellowstone.com</span></dd>
						<dt>Telephone</dt>
						<dd><span class="admin-contact-telephone">(403) 123-4567</span></dd>
					</dl>
					<h3>Payment contact</h3>
					<dl>
						<dt>Name</dt>
						<dd><span class="payment-contact-name">John Dutton</span></dd>
						<dt>Address</dt>
						<dd><span class="payment-contact-address">999 Main St., Calgary AB</span></dd>
						<dt>Email</dt>
						<dd><span class="payment-contact-email">john.dutton@yellowstone.com</span></dd>
						<dt>Telephone</dt>
						<dd><span class="payment-contact-telephone">(403) 123-4567</span></dd>
					</dl>
				
					<div>
						<h2>General information</h2>
						<span class="pull-right"><button class="btn btn-secondary" type="button" onclick="window.location.href = 'general.html'+ window.location.search">Edit</button></span>
					</div>
					<dl>
						<dt>Application identifier</dt>
						<dd><span class="ari">-</span></dd>
						<dt>Effective date</dt>
						<dd><span class="effective-date">2024-04-28</span></dd>
						<dt>Renewable or temporary licence</dt>
						<dd><span class="renewable-temporary">Temporary</span></dd>
						<dt>Expiry date</dt>
						<dd><span class="expiry-date">2024-10-24</span></dd>
						<dt>Does The best company or any of its affiliates or subsidiaries currently have 100,000 or more retail mobile phone subscribers?</dt>
						<dd><span class="MNSP">Yes</span></dd>
					</dl>
					<div>
						<h2>Technical details</h2>
						<span class="pull-right"><button class="btn btn-secondary" type="button" onclick="window.location.href = 'technical-details.html'+ window.location.search">Edit</button></span>
					</div>
						<dt>Bandwidth</dt>
						<dd><span class="bandwidth">10 MHz</span></dd>
						<dt>Antenna location</dt>
						<dd><span class="antenna">Outdoor and indoor</span></dd>
						<dt>Licence type</dt>
						<dd><span class="power-level">Medium power</span></dd>
					</dl>
				
					<div>
						<h2>Licence area</h2>
						<span class="pull-right"><button class="btn btn-secondary" type="button" onclick="window.location.href = 'licence-area.html'+ window.location.search">Edit</button></span>
					</div>
					<div id="map">
						Map
					</div>
					<h3>Boundary points</h3>
					<table class="table">
						<tr>
							<th><span class="wb-inv">Number</span></th>
							<th>Latitude</th>
							<th>Longitude</th>
						</tr>
						<tr><td>1</td><td><span class="lat1">48.233463</span></td><td><span class="long1">-89.750008</td></tr>
						<tr><td>2</td><td><span class="lat2">48.291512</span></td><td><span class="long2">-89.721282</td></tr>
						<tr><td>3</td><td><span class="lat3">48.281911</span></td><td><span class="long3">-89.658390</td></tr>
						<tr><td>4</td><td><span class="lat4">48.254440</span></td><td><span class="long4">-89.614391</td></tr>
						<tr><td>5</td><td><span class="lat5">48.216475</span></td><td><span class="long5">-89.593922</td></tr>
						<tr><td>6</td><td><span class="lat6">48.234064</span></td><td><span class="long6">-89.683164</td></tr>
						<tr><td>7</td><td><span class="lat7">48.234064</span></td><td><span class="long7">-89.683164</td></tr>
						<tr><td>8</td><td><span class="lat8">48.234064</span></td><td><span class="long8">-89.683164</td></tr>
						<tr><td>9</td><td><span class="lat9">48.234064</span></td><td><span class="long9">-89.683164</td></tr>
						<tr><td>10</td><td><span class="lat10">48.233463</span></td><td><span class="long10">-89.750008</td></tr>
						<tr><td>11</td><td><span class="lat11">48.233463</span></td><td><span class="long11">-89.750008</td></tr>
						<tr><td>12</td><td><span class="lat12">48.233463</span></td><td><span class="long12">-89.750008</td></tr>
					</table>
			
					<div>
						<h2>Frequency</h2>
						<span class="pull-right"><button class="btn btn-secondary" type="button" onclick="window.location.href = 'frequency.html'+ window.location.search">Edit</button></span>
					</div>
					<dl>
						<dt>Requested frequency blocks</dt>
						<dd><span class="frequency">A3: 3920&ndash;3930&nbsp;MHz</span></dd>
					</dl>
				
					<div>
						<h2>Licence fee</h2>
						<!-- TODO: Where should this link to? -Jacob -->
						<!-- <span class="pull-right"><button class="btn btn-secondary" type="button">Edit</button></span> -->
					</div>
					<dl class="dl-horizontal">
						<dt>Base rate (Rural) per year</dt>
						<dd>$<span class="base-rate">0.45</span> per MHz per km<sup>2</sup></dd>
						<dt>Requested bandwidth</dt>
						<dd><span class="bandwidth">10</span> MHz</dd>
						<dt>Area size</dt>
						<dd><span class="area-size">162</span> km<sup>2</sup></dd>
					</dl>
					<dl class="dl-horizontal">
						<dt>Total cost per year</dt>
						<dd>$<span class="base-rate">0.45</span> &times; <span class="bandwidth">10</span> &times; <span class="area-size">162</span> = $<span class="total-cost">729.00</span></dd>
					</dl>
				</div>

				<section id="save-div" class="alert alert-success" hidden>
					<p>Application saved as draft</p>
				</section>
				<button class="btn btn-primary" type="submit" id="next-button">Submit</button>
				<button class="btn btn-secondary" type="button" id="save-button">Save</button>
				<button class="btn btn-secondary" type="button" onclick="print()">Print</button>
				<br>
				<button class="btn btn-secondary" type="button" onclick="window.location.href = 'frequency.html'+ window.location.search">Back</button>

				<div class="notesaboutmockup">
					<h2>Notes about this mockup:</h2>
					<ul>
						<li>TODO: remove back button?</li>
					</ul>
				</div>
			</div>
		</div>
	</form>
	<script>
		const queryString = window.location.search
		const urlParams = new URLSearchParams ( queryString )
		var lats = [];
		var longs = [];
		var lat_longs = [];

		for ( const [ key, value ] of urlParams ) {
			// add lat longs to the variable
			if (value != "") {
				if (key.startsWith('lat')) {
					lats.push(value);
				} else if (key.startsWith('long')) {
					longs.push(value);
				}
			}

			for ( const elem of document .getElementsByClassName ( key ) ) {
				if ( value == "" ) {
					elem .innerText = "-"
				} else {
					elem .innerText = value
				}
			}
		}

		// Hide unneeded boundary point pairs
		// Yes there are probably slicker ways to do this. This is prototype code, not production code
		for ( let i = lats .length +1; i < 13; i++ ) {			
			let children = document .getElementsByClassName ( "lat" + i )
			for ( let j = 0; j < children .length; j++ ) {
				children [j] .parentNode .parentNode .remove()
			}			
		}

		// combine lat longs into an array for leaflet.
		for (let i = 0; i < lats.length; i++) {
			lat_longs.push([lats[i],longs[i]])
		}

	</script>
	<script>
		const saveButton = document.getElementById ( "save-button" )
		const saveDiv = document.getElementById ( "save-div" )
		saveButton.addEventListener ( "click", (event) => {
			saveDiv .removeAttribute ( "hidden" )
		})
	</script>
	</div>
	<div id="change-licensee">
		<div class="container">
			<div class="row">
				<div class="col-xs-offset-8 col-xs-4">
					<details>
						<summary>The Best Company</summary>
						<p><a href="select-licensee.html">Switch licensee account</a></p>
						<p class="border-top"><a href="login.html"><span class="glyphicon-log-out glyphicon"></span> Sign out</a></p>
					</details>
				</div>
			</div>
		</div>
	</div>
	<script>
		// Move #change-licensee to top of screen
		// We want it to be immediately under the dark horizontal line, but that line is added by WET so we can't access it until after WET does its thing
		// This does lead to z-index issues: the "Log out" button can't currently be reached because it's behind the <main> element
		const changeLicensee = document .getElementById ( "change-licensee" )
		const wbBc = document .getElementById ( "wb-bc" )
		wbBc .prepend ( changeLicensee )
	</script>
	<script>
		// Read application number from parameters if present
		if ( urlParams .has ( "app-number" ) ) {
			const appNumberText = urlParams .get ( "app-number" )
			for ( let elem of document .getElementsByClassName ( "app-number" ) ) {
				elem .innerText = appNumberText
			}
		}
	</script>
<!-- End page content -->

			<div id="def-preFooter">
				<!-- Write closure fall-back static file -->
				<!-- preFooter-en.html -->
			</div>
			<!-- Write closure template -->
			<script>
				var defPreFooter = document.getElementById("def-preFooter");
				defPreFooter.outerHTML = wet.builder.preFooter({
					"cdnEnv": "esdcprod",
					"versionIdentifier": "CD56",
					"showPostContent": false,
					"showFeedback": false,
					"showShare": false
				});
			</script>
		</main>
		<div id="def-footer">
			<!-- Write closure fall-back static file -->
			<!-- transactFooter-en.html -->
		</div>
		<!-- Write closure template -->
		<script>
			var defFooter = document.getElementById("def-footer");
			defFooter.outerHTML = wet.builder.footer({
				"cdnEnv": "esdcprod",
				"showFooter": false,
				"showFeatures": false,
				"termsLink": [{
        			"newWindow": true
				}],
				"privacyLink": [{
					"newWindow": true
				}],
				"contextualFooter":{
					"title": "Spectrum and Telecommunications Sector",
					"links": [{
						"text": "Contact us",
						"href":"https://ised-isde.canada.ca/site/spectrum-management-telecommunications/en/licences-and-certificates/radiocom-information-circulars-ric/ric-66-addresses-and-telephone-numbers-district-offices",
						"newWindow": true
					}]
				}
			});
		</script>
		<!-- Write closure template -->
		<script>
			document.write(wet.builder.refFooter({
				"cdnEnv": "esdcprod"
			}));
		</script>

		<!-- Leaflet js -->
		<script>

			var map = L.map('map', {zoomControl: false});
		
			var tiles = L.tileLayer('https://tile.openstreetmap.org/{z}/{x}/{y}.png', {
				attribution: '&copy; <a href="http://www.openstreetmap.org/copyright">OpenStreetMap</a>'
			}).addTo(map);
		
			var polygon = L.polygon(lat_longs).addTo(map);

			// zoom into the polygon
			map.fitBounds(polygon.getBounds());

			// disable map interaction
			map.dragging.disable();
			map.touchZoom.disable();
			map.doubleClickZoom.disable();
			map.scrollWheelZoom.disable();
			map.boxZoom.disable();
			map.keyboard.disable();
			if (map.tap) map.tap.disable();
			document.getElementById('map').style.cursor='default';
		
		</script>
		<script src="queries-in-navbar.js"></script>
	</body>
</html>