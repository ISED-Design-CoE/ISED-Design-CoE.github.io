<!DOCTYPE html>
<!--[if lt IE 9]><html class="no-js lt-ie9" lang="en" dir="ltr"><![endif]-->
<!--[if gt IE 8]><!-->
<html class="no-js" lang="en" dir="ltr"><!--<![endif]-->

<head>
    <!-- Based on CDTS 4.1.0 (https://cenw-wscoe.github.io/sgdc-cdts/docs/index-en.html) with DECoE customizations added (look for "DECoE customization" in comments) -->
    <meta charset="utf-8">

    <!-- Start DECoE customization -->
    <title>
        WKT tool - NCL portal - Spectrum licensing services - Innovation, Science and Economic Development Canada
    </title>
    <!-- End DECoE customization -->

    <meta content="width=device-width,initial-scale=1" name="viewport">
    <script src="https://www.canada.ca/etc/designs/canada/cdts/gcweb/v4_1_0/cdts/compiled/soyutils.js"></script>
    <script src="https://www.canada.ca/etc/designs/canada/cdts/gcweb/v4_1_0/cdts/compiled/wet-en.js"></script>
    <noscript>
        <!-- Write closure fall-back static file -->
        <!-- refTop.html -->
    </noscript>
    <!-- Write closure template -->
    <script>
        document.write(wet.builder.refTop({
            "cdnEnv": "esdcprod"
        }));
    </script>

    <!-- Start DECoE customization -->

    <link rel="stylesheet" href="libs/leaflet.css" />
    <link rel="stylesheet" href="src/leaflet.draw.css" />

    <script>
        const baseQuery = window.location.search
        var urlQueries = baseQuery
    </script>
    <style>
        /* Styles for all mockups */
        .notesaboutmockup {
            color: #333;
            background: #FFD;
            padding: 0 1em;
            border-color: #FC6;
            border-width: 2px;
            border-style: solid;
            margin-top: 3em;
        }

        .notesaboutmockup h2 {
            font-size: inherit;
            margin-top: 1em;
        }

        /* Styles for this mockup */
        #map {
            border: 1px solid black;
            height: 65em;
            margin-bottom: 2em;
        }

        #WKT {
            width: 100%;
        }

        @media (min-width: 768px) {
            .dl-horizontal dt {
                width: 15em;
            }
        }

        .highlight {
            background-color: yellow;
        }

        .margin-top,
        #map-instructions {
            margin-top: 38px;
        }

        .text-on-map {
            background: white;
            border-radius: 4px;
            outline: 2px solid rgba(0, 0, 0, 0.2);
            padding: 8px;
        }

        html {
            scroll-behavior: smooth;
        }

        #map .leaflet-draw-draw-polygon {
            background-image: url('src/images/draw.svg') !important;
            background-position: 50%;
            background-size: 60%;
            width: 5em;
            height: 5em;

        }
    </style>
    <link href="https://sms-sgs.ic.gc.ca/static/css/wizard.css" rel="stylesheet" type="text/css">
    <!-- End DECoE customization -->

</head>

<body vocab="http://schema.org/" typeof="WebPage">
    <div id="def-top">
        <!-- Write closure fall-back static file -->
        <!-- transactTop-en.html -->
    </div>
    <!-- Write closure template -->
    <script>
        var defTop = document.getElementById("def-top");
        defTop.outerHTML = wet.builder.top({
            "cdnEnv": "esdcprod",
            "lngLinks": [{
                "lang": "fr",
                "href": "get_wkt_fr.html",
                "text": "Fran√ßais"
            }],
            "search": false,
            "siteMenu": false,

            "showPreContent": false
        });
    </script>

    <script>
        function copy() {

            let output = document.getElementById("WKT");
            navigator.clipboard.writeText(output.textContent)
            document.getElementById("copied-alert").removeAttribute("hidden")
        }

        // I am sure that there is a better, more efficient way of doing this...
        document.addEventListener("click", (evt) => {
            if (evt.target != document.getElementById("copy-button")) {
                document.getElementById("copied-alert").setAttribute("hidden", "hidden");
            }
        });
    </script>

    <main property="mainContentOfPage" typeof="WebPageElement" class="container">

        <!-- Start page content -->

        <div class="wb-frmvld">

            <div class="wb-frm">
                <div class="container">

                    <h1 property="name" id="wb-cont">Licence area in WKT (Well Known Text) Format</h1>
                    <p>
                        You may draw a licence area, with up to 12 boundary points on the interactive map below.
                        Once a licence area is defined, you may copy the coordinates in WKT format to your clipboard.
                    </p>

                    <div class="row">
                        <details id="map-instructions">
                            <summary>How to use the interactive map</summary>
                            <p>To navigate the map:</p>

                            <ul>
                                <li>Click and drag to move the map</li>
                                <li>Zoom in:</li>
                                <ul>
                                    <li>Double click</li>
                                    <li>Scroll</li>
                                    <li>Click the zoom icons on the bottom right</li>
                                </ul>
                            </ul>
                            <p>To draw:</p>
                            <ol>
                                <li>Navigate to your location</li>
                                <li>Click the draw tool
                                    <img src="src/images/draw.svg" alt="Draw Tool">
                                </li>
                                <li>Click on the map to add points. These are connected by straight lines.</li>
                                <li>Close your boundary:</li>
                                <ul>
                                    <li>Click the first point</li>
                                    <li>Click the finish button next to the draw icon</li>
                                </ul>
                                <li>Edit your boundary:</li>
                                <ul>
                                    <li>Drag the white points to move them</li>
                                    <li>Drag the translucent points to add new points</li>
                                </ul>
                            </ol>
                        </details>
                        <div id="map"></div>
                    </div>

                    <div class="form-group margin-top">

                        <div class="alert alert-info" id="medium-power-alert" hidden="hidden">
                            <p>The area is between 75 km<sup>2</sup> and 165 km<sup>2</sup>. It can only be used with
                                <b>medium power</b>.</sup>
                            </p>
                        </div>

                        <div class="alert alert-info" id="low-power-alert" hidden="hidden">
                            <p>The area is between 0 km<sup>2</sup> and 15 km<sup>2</sup>. It can only be used with
                                <b>low power</b>.</sup>
                            </p>
                        </div>

                        <div class="alert alert-danger" id="too-large-alert" hidden="hidden">
                            <p>The area is too large. Please reduce the size of the polygon to be less than
                                165km<sup>2</sup></p>
                        </div>

                        <div class="alert alert-danger" id="between-alert" hidden="hidden">
                            <p>The area is between 15 km<sup>2</sup> and 75 km<sup>2</sup>. Please reduce or increase
                                your area size beyond these limits.</p>
                        </div>

                        <div id="wkt-output" hidden="true">
                            <label for="WKT">
                                <span class="field-name" id="wkt-input">
                                    Licence area in WKT (Well Known Text) format
                                </span>
                            </label>
                            <output type="text" id="WKT" name="WKT" class="form-control"></output>
                            <button class="btn btn-primary" type="button" id="copy-button" onClick="copy()">Copy
                                WKT</button>

                        </div>

                        <div class="alert alert-success" id="copied-alert" hidden="true">
                            <p>WKT Copied</p>
                        </div>


                    </div>
                </div>

            </div>
        </div>
        </div>

        <!-- End page content -->

        <div id="def-preFooter">
            <!-- Write closure fall-back static file -->
            <!-- preFooter-en.html -->
        </div>
        <!-- Write closure template -->
        <script>
            var defPreFooter = document.getElementById("def-preFooter");
            defPreFooter.outerHTML = wet.builder.preFooter({
                "cdnEnv": "esdcprod",
                "versionIdentifier": "CD56",
                "showPostContent": false,
                "showFeedback": false,
                "showShare": false
            });
        </script>
    </main>
    <div id="def-footer">
        <!-- Write closure fall-back static file -->
        <!-- transactFooter-en.html -->
    </div>
    <!-- Write closure template -->
    <script>
        var defFooter = document.getElementById("def-footer");
        defFooter.outerHTML = wet.builder.footer({
            "cdnEnv": "esdcprod",
            "showFooter": false,
            "showFeatures": false,
            "termsLink": [{
                "newWindow": true
            }],
            "privacyLink": [{
                "newWindow": true
            }],
            "contextualFooter": {
                "title": "Spectrum and Telecommunications Sector",
                "links": [{
                    "text": "Contact us",
                    "href": "https://ised-isde.canada.ca/site/spectrum-management-telecommunications/en/licences-and-certificates/radiocom-information-circulars-ric/ric-66-addresses-and-telephone-numbers-district-offices",
                    "newWindow": true
                }]
            }
        });
    </script>
    <!-- Write closure template -->
    <script>
        document.write(wet.builder.refFooter({
            "cdnEnv": "esdcprod"
        }));
    </script>

<script async src="https://maps.googleapis.com/maps/api/js?key=AIzaSyBtgL6wcFCT53e77HPUQnTBZRsDUKIafwE&libraries=drawing&callback=initMap">
</script>

    <script>
        // GOOGLE MAPS

        function initializeMap() {
            const mapOptions = {
                center: { lat: 63.27268094792591, long: -100.5815661012755 },
                zoom: 3
            }
        }

        const map = new google.maps.Map(document.getElementById("map"), mapOptions)

        const drawingManager = new google.maps.drawing.DrawingManager({
            drawingMode: google.maps.drawing.OverlayType.POLYGON,
            drawingControl: true,
            drawingControlOptions: {
                position: google.maps.ControlPosition.TOP_CENTER,
                dawringModes: [google.maps.drawing.OverlayType.POLYGON],
            },
        });

        drawingManager.setMap(map);

        google.maps.event.addListener(drawingManager, "polygoncomplete", function (polygon) {
            const polygonCoordinates = polygon.getPath.getArray();
            console.log('coords:', polygonCoordinates);
        });

        google.maps.event.addDomListener(window, "load", initializeMap);
    </script>


    


</html>